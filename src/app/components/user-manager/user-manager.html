<div class="p-3 text-white d-flex flex-column vh-100">
    <!-- Header -->
    <span class="fs-4">User Management</span>
    <hr>
    
    <!-- Only displays group join requests if being used for group user management -->
    @if(groupID){
        <span class="fs-5">Join Requests</span>
            <table>
            @for(user of joinRequests; track user){
                <tr>
                    <!-- Username -->
                    <th class="tableText">
                        {{user}}
                    </th>
                    <th>
                    <!-- Request Option -->
                    <div>
                        <button (click)="answerRequest(user, true)" class="btn btn-success">Accept</button>
                        <button (click)="answerRequest(user, false)" class="btn btn-danger">Decline</button>
                    </div>
                    </th>
                </tr>
            }
    </table>
    <hr>
    }
    <span class="fs-5">Manage Users</span>

    <!-- User Table -->
    <table>
        <!-- Table Headers -->
        <tr>
            <th>Username</th>
            <th>Roles</th>
            <th>Functions</th>
        </tr>
        <!-- Loops through each user -->
        @for(user of users; track user.username){
            <tr>
                <!-- Username -->
                <th class="tableText">
                    {{user.username}}
                </th>
                <th>
                <!-- Loops through roles -->
                @if(userToEdit !== user.username){
                        @if(user.admin){
                            Admin of this group
                        }
                        @for(role of user.roles; track role){
                            <div class="tableText">
                                - {{role}}
                            </div>
                        }
                }@else{
                    <form>
                        <div>
                            <input class="form-check-input" type="checkbox" id="serverAdmin">
                            <label class="form-check-label" for="serverAdmin">
                                Admin for server
                            </label>
                        </div>
                        <div>

                            <input class="form-check-input" type="checkbox" value="" id="superAdmin">
                            <label class="form-check-label" for="superAdmin">
                                Super Admin
                            </label>
                        </div>
                        <div>

                            <input class="form-check-input" type="checkbox" value="" id="groupAdmin">
                            <label class="form-check-label" for="groupAdmin">
                                Group Admin
                            </label>
                        </div>
                        <button class="btn btn-primary" type="submit">Confirm</button>
                    </form>
                }
                </th>
                <th>
                    <div>
                        <!-- Edit Roles -->
                        <button (click)="editRoles(user.username)" class="btn btn-primary">Roles</button>
                        <!-- Displays only if managing group -->
                        @if(groupID){
                            <button (click)="kickFromGroup(user.username)" class="btn btn-warning">Kick</button>
                        }
                        <!-- Delete User -->
                        <button (click)="deleteUser(user.username)" class="btn btn-danger">Delete</button>
                    </div>
                </th>
            </tr>
        }
    </table>

</div>